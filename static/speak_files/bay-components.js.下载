var bayComponents=function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5);Object.defineProperty(t,"initAudios",{enumerable:!0,get:function(){return i(o).default}});var r=n(14);Object.defineProperty(t,"initVideos",{enumerable:!0,get:function(){return i(r).default}});var a=n(7);Object.defineProperty(t,"initCollapse",{enumerable:!0,get:function(){return i(a).default}});var s=n(6);Object.defineProperty(t,"initCalendar",{enumerable:!0,get:function(){return i(s).default}});var c=n(4);Object.defineProperty(t,"PullToLoadList",{enumerable:!0,get:function(){return c.PullToLoadList}});var u=n(9);Object.defineProperty(t,"comments",{enumerable:!0,get:function(){return i(u).default}});var l=n(13);Object.defineProperty(t,"tabs",{enumerable:!0,get:function(){return i(l).default}});var d=n(12);Object.defineProperty(t,"renderEditor",{enumerable:!0,get:function(){return i(d).default}});var h=n(10);Object.defineProperty(t,"initFlipper",{enumerable:!0,get:function(){return i(h).default}}),n(17)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(2);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var r=n(15);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var a=n(16);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=arguments,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=t.assertString=function(e){if("string"!=typeof e)throw new TypeError("This library (validator.js) validates strings only")},r=t.toString=function(e){return"object"===("undefined"==typeof e?"undefined":i(e))&&null!==e?e="function"==typeof e.toString?e.toString():"[object Object]":(null===e||"undefined"==typeof e||isNaN(e)&&!e.length)&&(e=""),String(e)};t.merge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return Object.keys(t).forEach(function(n){"undefined"==typeof e[n]&&(e[n]=t[n])}),e},t.isStandardBrowserEnv=function(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement},t.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},t.isWechatUA=function(e){return/micromessenger/i.test(e)},t.isMobileUA=function(e){return/Mobile|iP(hone|od|ad)|iOS|Android|BlackBerry/i.test(e)},t.isAndroidUA=function(e){return/(android)/i.test(e)},t.isIOSUA=function(e){return/iPad|iOS|iPhone|iPod/i.test(e)},t.isShanbayAppUA=function(e){return/com\.shanbay/.test(e.toLowerCase())},t.isMobilePhone=function(e){var t=r(e),n={"zh-CN":/^(\+?0?86\-?)?1[345789]\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/};return n["zh-CN"].test(t)||n["zh-TW"].test(t)},t.isEmail=function(e){o(e);var t=/^(([^<>()\[\]\\.,;:\s@']+(\.[^<>()\[\]\\.,;:\s@']+)*)|('.+'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},t.isUrl=function(e){o(e);var t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return t.test(e)},t.escapeStr=function(e){return o(e),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")},t.unescapeStr=function(e){return o(e),e.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#96;/g,"`")},t.isStrLength=function(e,t){o(e);var r=void 0,a=void 0;"object"===("undefined"==typeof t?"undefined":i(t))?(r=t.min||0,a=t.max):(r=n[1],a=n[2]);var s=e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],c=e.length-s.length;return c>=r&&("undefined"==typeof a||c<=a)},t.isJSON=function(e){o(e);try{var t=JSON.parse(e);return!!t&&"object"===("undefined"==typeof t?"undefined":i(t))}catch(e){}return!1},t.isNumeric=function(e){var t=/^[-+]?[0-9]+$/;return o(e),t.test(e)},t.isEmptyStr=function(e){return o(e),0===e.length},t.isEmptyObj=function(e){return!Object.keys(e).length},t.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.parseDate=function(e){var t=/^(\d{4})\-(\d{2})\-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\+|\-)(\d{4})$/,n=/^(\d{4})\-(\d{2})\-(\d{2})T(\d{2}):(\d{2}):(\d{2})$/;return t.test(e)?new Date([e.slice(0,22),":",e.slice(22)].join("")):n.test(e)?new Date(e.replace("T"," ")):new Date(e)},i=t.pad=function(e,t,n){return e.length>=t?e:new Array(t-e.length+1).join(n)+e},o=(t.formatDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-DD",o="日_一_二_三_四_五_六".split("_"),r=n(e),a={Y:r.getFullYear(),y:r.getFullYear(),M:r.getMonth()+1,D:r.getDate(),d:r.getDay(),h:r.getHours(),m:r.getMinutes(),s:r.getSeconds(),S:r.getMilliseconds()},s=t.replace(/([YyMDdhmsS])+/g,function(e,t){var n=a[t],r=e.length;return void 0===n?e:(n=n.toString(),"d"===e?o[n]:r>n.length?i(n,r,0):"y"===t||"Y"===t?n.substr(n.length-r):n)});return s},t.trimString=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e.length<=t?e:e.slice(0,t)+n},t.formatSafetyStr=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*";e=e.toString();var o=e.length-t-n;if(o<0)return e;var r=new Array(o+1).join(i);return[e.slice(0,t),r,n<=0?"":e.slice(-n)].join("")});t.formatSafetyEmail=function(e,t,n,i){var r=e.toString();return t=Number(t)||Math.floor(1*r.length/4),n=Number(n)||Math.floor(1*r.length/4),o(r,t,n,i)},t.formatSafetyMobilephone=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments[3];return o(e,t,n,i)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.PullToLoadList=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1);t.PullToLoadList=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n={container:window,ipp:10,pageNum:0,total:0,apiUrl:"",threshold:10,renderItem:function(){},onLoadedFirstPage:function(){},onLoadedError:function(){},parseData:function(e){return{items:e.objects,total:e.total}}};this.options=$.extend({},n,t),this.apiUrl=this.options.apiUrl,this.ipp=this.options.ipp,this.pageNum=this.options.pageNum,this.total=this.options.total,this.renderItem=this.options.renderItem,this.parseData=this.options.parseData,this.onLoadedFirstPage=this.options.onLoadedFirstPage,this.onLoadedError=this.options.onLoadedError,this.threshold=this.options.threshold,this.container=this.options.container,this.items=[],this.isLoading=!1,this.$loadHint=$("#load-hint"),this.$loadMoreHint=$("#load-more-hint"),this.init()}return o(e,[{key:"init",value:function(){this.pageNum>0?this.onLoadedFirstPage({}):(this.pageNum+=1,this.loadItems(this.onLoadedFirstPage,this.onLoadedError)),this.bindEvents()}},{key:"bindEvents",value:function(){var e=this,t=$(window),n=$(this.container)[0],i=$("body");t.on("touchmove mousewheel",function(){if(!e.isLoading)if(n===window){var t=document.documentElement;t.scrollHeight-Math.ceil(window.scrollY||window.pageYOffset)-e.threshold<=t.clientHeight&&e.loadMoreData()}else n.scrollHeight-Math.ceil(n.scrollTop)-e.threshold<=n.clientHeight&&e.loadMoreData()}),i.on("click","#load-more-hint",function(){e.loadMoreData()})}},{key:"loadMoreData",value:function(){this.checkIsLastPage()||(this.pageNum+=1,this.renderLoading(),this.loadItems())}},{key:"checkIsLastPage",value:function(){return this.pageNum*this.ipp>=this.total}},{key:"renderMoreHint",value:function(){this.checkIsLastPage()?this.$loadMoreHint.hide():this.$loadMoreHint.show()}},{key:"renderLoading",value:function(){this.$loadMoreHint.hide(),this.$loadHint.show()}},{key:"renderItems",value:function(){var e=this;this.items.forEach(function(t){return e.renderItem(t)}),this.renderMoreHint()}},{key:"loadItems",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.isLoading=!0;var i=void 0;i=this.apiUrl.split("?").length>1?this.apiUrl+"&page="+this.pageNum+"&ipp="+this.ipp:this.apiUrl+"?page="+this.pageNum+"&ipp="+this.ipp,(0,r.ajax)({url:i,type:"GET",success:function(n){var i=e.parseData(n);e.$loadHint.hide(),e.items=i.items,e.total=i.total,e.isLoading=!1,e.renderItems(),t(n)},error:function(t,i){e.$loadHint.hide(),n(t,i)}})}}]),e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=Math.floor(e);return t<10?"0"+t:t},i=function(e){var t=n(e/60),i=n(e%60);return t+":"+i},o=function(e){e.find(".current-point").css("left","0%"),e.find(".current-bar").css("width","0%"),e.find(".audio-controls-time").html("00:00")},r=function(e){return function(){e.play()}},a=function(e){return function(){e.pause()}},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"play";"play"===t?(e.find(".play-btn").hide(),e.find(".pause-btn").show()):(e.find(".pause-btn").hide(),e.find(".play-btn").show())},c=function(e){return function(){s(e,"play")}},u=function(e){return function(){s(e,"pause")}},l=function(e){return function(){o(e)}},d=function(e){return function(t){var n=t.target,o=n.currentTime,r=n.duration,a=n.currentTime/r*100;e.find(".current-point").css("left",a+"%"),e.find(".current-bar").css("width",a+"%"),e.find(".audio-controls-time").html(i(o))}},h=function(){var e=['<div class="audio-controls">','   <div class="audio-controls-content">','      <div class="audio-controls-btn">','          <i class="ib ib-play-circle-o play-btn"></i>','          <i class="ib ib-pause-circle pause-btn" style="display: none;"></i>',"      </div>",'      <div class="audio-controls-bar">','          <div class="current-point"></div>','          <div class="current-bar"></div>',"      </div>",'      <div class="audio-controls-time">00:00</div>',"   </div>","</div>"].join("");return $($.parseHTML(e))},f=function(e,t){t.on("click",".play-btn",r(e[0])).on("click",".pause-btn",a(e[0])),e.on("timeupdate",d(t)).on("play",c(t)).on("pause",u(t)).on("ended",l(t))},p=function(e){var t=h();f(e,t),e.after(t)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$(e).each(function(e,n){p($(n),t)})};t.default=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"<"+e+" "+Object.keys(n).map(function(e){return e+'="'+n[e]+'"'}).join(" ")+">\n        "+t+"\n    </"+e+">"},c=function(e){for(var t=[],n=e.min;n<=e.max;n+=1)t.push(s(e.node,e.item(n)));return t.join("")},u=function(e,t){for(var n=[],i=new Date(e);i<=t;){var o=(0,r.formatDate)(i,"YYYY-MM-D").split("-");n.push({year:o[0],month:o[1],day:o[2]}),i.setDate(i.getDate()+1)}return n},l=function(e){var t=new Date(e.replace(".","-")),n=t.getDay();t.setDate(t.getDate()-n);var i=new Date(t);return i.setDate(t.getDate()+41),u(t,i)},d=function(){function e(t){var n=this;i(this,e),this.options=(0,r.merge)(t,{$el:$("#calendar"),activeDate:new Date,min:new Date,max:new Date,dates:{primary:[],secondary:[]},onClickDate:function(){}}),Object.keys(this.options).forEach(function(e){n[e]=n.options[e]}),this.handleClickDate=this.handleClickDate.bind(this),this.tableHead=this.tableHead.bind(this),this.tableRow=this.tableRow.bind(this),this.tableBody=this.tableBody.bind(this),this.table=this.table.bind(this),this.init()}return o(e,[{key:"init",value:function(){this.$el.addClass("bay-calendar"),this.activeDate=(0,r.formatDate)(this.activeDate,"YYYY.MM"),this.min=(0,r.formatDate)(this.min,"YYYY.MM"),this.max=(0,r.formatDate)(this.max,"YYYY.MM"),this.dates.primary=this.dates.primary?this.dates.primary.map(function(e){return(0,r.formatDate)(e,"YYYY-MM-D")}):[],this.dates.secondary=this.dates.secondary?this.dates.secondary.map(function(e){return(0,r.formatDate)(e,"YYYY-MM-D")}):[],this.render(),this.bindEvents()}},{key:"render",value:function(){this.$el.html(""),this.$el.html(this.monthNav()+this.table())}},{key:"bindEvents",value:function(){var e=this;this.$el.on("click",".prev-month-btn",function(t){$(t.currentTarget).hasClass("disabled")||e.updateMonth(-1)}),this.$el.on("click",".next-month-btn",function(t){$(t.currentTarget).hasClass("disabled")||e.updateMonth(1)}),this.$el.on("click",".date-btn",this.handleClickDate)}},{key:"updateMonth",value:function(e){this.activeDate=new Date(this.activeDate.replace(".","-")),this.activeDate.setMonth(this.activeDate.getMonth()+e),this.activeDate=(0,r.formatDate)(this.activeDate,"YYYY.MM"),this.render()}},{key:"handleClickDate",value:function(e){var t=$(e.currentTarget),n=t.data("date");this.onClickDate(n)}},{key:"monthNav",value:function(){if(this.activeDate<this.min||this.activeDate>this.max)throw Error("请检查一下参数，activeDate 不在范围内");return s("div",s("i","",{class:"\n                    ib ib-chevron-left prev-month-btn\n                    "+(this.activeDate===this.min?"disabled":"")+"\n                "})+s("span",this.activeDate)+s("i","",{class:"\n                    ib ib-chevron-right next-month-btn\n                    "+(this.activeDate===this.max?"disabled":"")+"\n                "}),{class:"header-nav"})}},{key:"tableHead",value:function(){return s("thead",s("tr",c({node:"th",min:0,max:6,item:function(e){return a[e]}})))}},{key:"tableRow",value:function(e){var t=this,n=l(this.activeDate),i=this.activeDate.split(".")[1];return c({node:"td",min:0,max:6,item:function(o){var r=7*e+o,a=n[r],c=a.year+"-"+a.month+"-"+a.day;return s("div",a.day,{class:"\n                            "+(i!==a.month?"disabled":"")+"\n                            "+(t.dates.primary.indexOf(c)!==-1?"primary":"")+"\n                            "+(t.dates.secondary.indexOf(c)!==-1?"secondary":"")+"\n                            date-btn\n                        ","data-date":c})}})}},{key:"tableBody",value:function(){return s("tbody",c({node:"tr",min:0,max:5,item:this.tableRow}))}},{key:"table",value:function(){return s("table",this.tableHead()+this.tableBody())}}]),e}(),h=function(e){return new d(e)};t.default=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){for(var n=/\s(\S+)$/,i=new RegExp("[\\u4E00-\\u9FFF]+"),o=e.html();e.height()>t;){var r=n.exec(o),a=2;if(r){var s=i.test(r[0]);s||(a=r[0].length)}o=e.html().slice(0,-a)+"&hellip;",e.html(o)}return e.html()},i=function(){var e=$("[bay-length-limited]");e.each(function(){var e=$(this),t=e.html(),i=e.attr("max-line"),o=$('<div class="wrapper bay-collapse"><p>'+t+"</p></div>"),r=o.find("p"),a=$('<a class="toggle-fold-btn">展开</a>'),s=!0;if($(this).html(o),i){var c=r.css("lineHeight"),u=parseInt(c,10)*i;if(!(r.height()<=u)){o.append(a);var l=n(r,u),d=function(){a.on("click",function(){s=!s,s?(r.html(l),a.html("展开")):(r.html(t),a.html("收起"))})};d()}}})};t.default=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),a=function(){function e(t){i(this,e),this.options=t,this.render=this.render.bind(this),this.toggleLike=this.toggleLike.bind(this),this.toggleDislike=this.toggleDislike.bind(this),this.showOperations=this.showOperations.bind(this),this.hideOperations=this.hideOperations.bind(this),this.toReportPage=this.toReportPage.bind(this),this.render(),this.bindEvents()}return o(e,[{key:"bindEvents",value:function(){this.options.isInteractiveDisabled||(this.$toggleLikeBtn=this.$comment.find(".toggle-like-btn"),this.$toggleDislikeBtn=this.$comment.find(".toggle-dislike-btn"),this.$operationList=this.$comment.find(".operation-list .list"),this.$toggleLikeBtn.on("touchstart",this.toggleLike),this.$toggleDislikeBtn.on("touchstart",this.toggleDislike),this.$comment.on("touchstart",".show-operations-btn",this.showOperations),this.$comment.on("touchstart",".report-btn",this.toReportPage),$("body").on("touchstart",this.hideOperations))}},{key:"toReportPage",value:function(e){var t=$(e.currentTarget);return window.location.href=t.attr("href"),!1}},{key:"showOperations",value:function(){return this.options.$el.find(".operation-list .list").hide(),this.$operationList.css({display:"block"}),!1}},{key:"hideOperations",value:function(){this.$operationList.hide()}},{key:"updateLikeStatus",value:function(e){var t=this,n=this.options,i=n.comment,o=n.buildLikeApiData;(0,r.ajax)((0,r.merge)(o({vote:e,commentId:i.id}),{type:"PUT",data:{vote:e},success:function(){t.changeLikeStatus(e)}}))}},{key:"changeLikeStatus",value:function(e){var t=this.$comment.find(".vote-num"),n=this.$toggleLikeBtn.hasClass("active"),i=+t.html()||0;"up"===e&&(this.$toggleLikeBtn.addClass("active"),this.$toggleDislikeBtn.removeClass("disable"),this.$toggleDislikeBtn.html("不喜欢"),status!==e&&t.html(i+1)),"down"===e&&(this.$toggleLikeBtn.removeClass("active"),this.$toggleDislikeBtn.addClass("disable"),this.$toggleDislikeBtn.html("已不喜欢"),n&&t.html(i-1||"")),"delete"===e&&(this.$toggleLikeBtn.removeClass("active"),this.$toggleDislikeBtn.removeClass("disable"),this.$toggleDislikeBtn.html("不喜欢"),n&&t.html(i-1||""))}},{key:"toggleLike",value:function(e){var t=$(e.currentTarget),n=t.hasClass("active"),i=n?"delete":"up";this.updateLikeStatus(i)}},{key:"toggleDislike",value:function(e){var t=$(e.currentTarget),n=t.hasClass("disable"),i=n?"delete":"down";return this.updateLikeStatus(i),!1}},{key:"render",value:function(){var e=this.options,t=e.$el,n=e.comment,i=e.currentUser,o=e.isInteractiveDisabled,a=e.hasLikeBtn,s=e.hasDislikeBtn,c=e.hasNestReplyBtn,u=e.hasReportBtn,l=n,d=l.user||{};this.$comment=$('\n            <div class="comment">\n                <div class="info">\n                    <div class="user-partial">\n                        <img class="avatar" src='+d.avatar+" />\n                        <div>\n                            <p>"+d.nickname+'</p>\n                            <p class="date">'+(0,r.formatDate)(l.created_at)+'</p>\n                        </div>\n                    </div>\n                    <div class="operation-partial">\n                        '+(i.user_id_str!==d.id||o?"":'<i\n                                class="ib ib-pencil operation-item show-input-btn"\n                                data-comment=\''+JSON.stringify(l)+"'\n                            />")+"\n                        "+(a?'<div class="toggle-like-btn operation-item '+(l.is_voted_up?"active":"")+'">\n                                <i class="ib ib-thumbs-up-o" />\n                                <span class="vote-num">'+(l.vote_score||"")+"</span>\n                            </div> ":"")+"\n                        "+((s||c||u)&&!o?'<div class="operation-list">\n                                <div class="dots show-operations-btn">…</div>\n                                <div class="list">\n                                    '+(s?'<span class="toggle-dislike-btn '+(l.is_voted_down?"disable":"")+'">\n                                            '+(l.is_voted_down?"已不喜欢":"不喜欢")+"\n                                        </span> ":"")+"\n                                    "+(c?'<span\n                                            class="show-input-btn"\n                                            data-to-user-id='+d.id+"\n                                        >回复</span>":"")+"\n                                    "+(u?'<a\n                                            class="report-btn"\n                                            href="/web/report?report_url='+encodeURIComponent(l.report_url)+"&next="+encodeURIComponent(window.location.href)+'"\n                                        > 举报 </a>':"")+"\n                                </div>\n                            </div>":"")+'\n                    </div>\n                </div>\n                <div class="content">'+l.content+"</div>\n            </div>\n        "),t.append(this.$comment)}}]),e}(),s=function(e){return new a(e)};t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(1),s=n(8),c=i(s),u=function(){function e(t){o(this,e),this.options=(0,a.merge)(t,{$el:$(".comments"),apiUrl:"",ipp:10,pageNum:0,total:0,threshold:10,currentUser:{},isInteractiveDisabled:!1,hasLikeBtn:!1,hasDislikeBtn:!1,hasReportBtn:!0,hasNestReplyBtn:!1,parseData:function(e){return{items:e.objects,total:e.total}},parseItemData:function(e){return e},buildCommentApiData:function(e){return{data:e}},buildLikeApiData:function(e){return{data:e}}}),this.render=this.render.bind(this),this.renderComment=this.renderComment.bind(this),this.renderEmptyBlock=this.renderEmptyBlock.bind(this),this.showCommentInputBox=this.showCommentInputBox.bind(this),this.hideCommentInputBox=this.hideCommentInputBox.bind(this),this.updateCommentBtnStatus=this.updateCommentBtnStatus.bind(this),this.submit=this.submit.bind(this),this.render(),this.bindEvents()}return r(e,[{key:"bindEvents",value:function(){var e=this.options.$el;e.on("touchstart",".show-input-btn",this.showCommentInputBox),e.on("touchstart",".submit-btn",this.submit),e.on("input",".comment-input",this.updateCommentBtnStatus),e.on("touchstart",".comment-bar",function(e){return e.stopPropagation()}),$("body").on("touchstart",this.hideCommentInputBox)}},{key:"updateCommentBtnStatus",value:function(e){var t=$(e.currentTarget).val(),n=this.options.$el.find(".submit-btn");t?n.addClass("active"):n.removeClass("active")}},{key:"submit",value:function(e){var t=this.options,n=t.$el,i=t.buildCommentApiData,o=t.apiUrl,r=n.find(".comment-input").val(),s=$(e.currentTarget);if(s.hasClass("active"))return this.editingComment.id?void(0,a.ajax)((0,a.merge)(i({commentId:this.editingComment.id,content:r}),{type:"PUT",success:this.render})):this.toUserId?void(0,a.ajax)((0,a.merge)(i({to_user_id:this.toUserId,content:r}),{url:o,type:"POST",success:this.render})):void(0,a.ajax)((0,a.merge)(i({content:r}),{url:o,type:"POST",success:this.render}))}},{key:"showCommentInputBox",value:function(e){if(this.editingComment={},e){var t=$(e.currentTarget),n=t.data("comment");this.editingComment=n||{},this.toUserId=t.data("to-user-id")}return this.$commentInputBox.show(),this.$commentInputBox.find("input").val(this.editingComment.content||"").focus(),!1}},{key:"hideCommentInputBox",value:function(){this.isCreating||(this.$commentInputBox.hide(),this.$commentInputBox.find("input").trigger("blur"))}},{key:"renderComment",value:function(e){(0,c.default)((0,a.merge)({comment:this.options.parseItemData(e)},this.options))}},{key:"renderEmptyBlock",value:function(){var e=this.options.$el,t='\n            <div class="empty-block">\n                <img src="https://static.baydn.com/baydn/public/images/object-sofa.png" />\n                <p>快来抢沙发吧～</p>\n            </div>\n        ';e.append(t)}},{key:"renderCommentInputBox",value:function(){var e=$('<div class="add-comment-bar-box"></div>');this.$commentInputBox=$('<div class="comment-bar bottom-bar">\n                <input class="comment-input" type= "text" placeholder= "添加评论..." />\n                <i class="ib ib-send submit-btn clickable" />\n            </div>'),this.options.$el.append(e),e.append(this.$commentInputBox),this.$commentInputBox.hide()}},{key:"render",value:function(){var e=this,t=this.options,n=t.$el,i=t.currentUser,o=t.parseData,r=t.parseItemData;n.addClass("bay-comments"),n.html(""),this.isCreating=!1,new bayComponents.PullToLoadList({ipp:this.options.ipp,pageNum:this.options.pageNum,total:this.options.total,apiUrl:this.options.apiUrl,threshold:this.options.threshold,renderItem:this.renderComment,parseData:this.options.parseData,onLoadedFirstPage:function(t){var n=o(t),a={user:{}};n.items[0]&&(a=r(n.items[0])),$(".comments-num").html(n.total),0!==n.total&&a.user.id===i.user_id_str||e.options.isInteractiveDisabled||(e.isCreating=!0,e.showCommentInputBox()),0===n.total&&e.renderEmptyBlock()}}),this.renderCommentInputBox()}}]),e}(),l=function(e){return new u(e)};t.default=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=$(window),i=n.height(),o=0,r=600,a=1,s=function(e,t,n,s){var c=void 0,u=!1,l=!1,d=(new Date).getTime(),h=(new Date).getTime(),f=t.length,p=function(t){var o=parseInt(e.css("transform").split(",")[5],10),r=t<0?o+i:o-i,c=f*i;Math.abs(r)<c-i?n.show():n.hide(),e.css("transform","translate3d(0, "+r+"px, 0)"),document.body.scrollTop=0,s(a)},v=function(){a+=1,p(1)},m=function(){a-=1,p(-1)};$("body").on("touchmove",function(e){e.preventDefault()}),t.on("touchstart",function(e){c=e.originalEvent.touches[0].clientY}),t.on("touchmove",function(e){var t=$(e.currentTarget),n=e.originalEvent.touches[0].clientY;u=t.scrollTop()===o,l=t.scrollTop()+t.outerHeight()+1>=t[0].scrollHeight,n>=c?(l=!1,u&&e.preventDefault()):(u=!1,l&&e.preventDefault()),e.stopPropagation()}),t.on("touchend",function(e){var t=$(e.currentTarget),n=e.originalEvent.changedTouches[0].clientY,i=(new Date).getTime(),o=i-d;o<r||(n>c&&u&&t.index()>0?(d=i,u=!1,m()):n<c&&l&&t.index()+1<f&&(d=i,l=!1,v()))}),n.on("click",function(){var e=(new Date).getTime(),t=e-h;h=e,t<r||v()})},c=function(e){var t=e.$container,n=e.$nextBtn,i=e.onChangePage,o=void 0===i?function(){}:i,r=t.children();t.addClass("flipper-pages"),r.addClass("flipper-page"),n.addClass("flipper-next-btn"),$("html").css("height","100%"),$("body").css("height","100%"),s(t,r,n,o)};t.default=c},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.enableInlineVideo=function(){/*! npm.im/intervalometer */
function e(e,t,n,i){function o(n){r=t(o,i),e(n-(a||n)),a=n}var r=void 0,a=void 0;return{start:function(){r||o(0)},stop:function(){n(r),r=null,a=0}}}function t(t){return e(t,requestAnimationFrame,cancelAnimationFrame)}function i(e,t,n){function i(i){n&&!n(e,t)||i.stopImmediatePropagation()}return e.addEventListener(t,i),i}function o(e,t,n,i){function o(){return n[t]}function r(e){n[t]=e}i&&r(e[t]),Object.defineProperty(e,t,{get:o,set:r})}function r(e,t,n){n.addEventListener(t,function(){return e.dispatchEvent(new Event(t))})}function a(e,t){Promise.resolve().then(function(){e.dispatchEvent(new Event(t))})}function s(e){var t=new Audio;return r(e,"play",t),r(e,"playing",t),r(e,"pause",t),t.crossOrigin=e.crossOrigin,t.src=e.src||e.currentSrc||"data:",t}function c(e,t,n){(x||0)+200<Date.now()&&(e[y]=!0,x=Date.now()),n||(e.currentTime=t),$[++D%3]=100*t|0}function u(e){return e.driver.currentTime>=e.video.duration}function l(e){var t=this;t.video.readyState>=t.video.HAVE_FUTURE_DATA?(t.hasAudio||(t.driver.currentTime=t.video.currentTime+e*t.video.playbackRate/1e3,t.video.loop&&u(t)&&(t.driver.currentTime=0)),c(t.video,t.driver.currentTime)):t.video.networkState===t.video.NETWORK_IDLE&&0===t.video.buffered.length&&t.video.load(),t.video.ended&&(delete t.video[y],t.video.pause(!0))}function d(){var e=this,t=e[g];return e.webkitDisplayingFullscreen?void e[w]():("data:"!==t.driver.src&&t.driver.src!==e.src&&(c(e,0,!0),t.driver.src=e.src),void(e.paused&&(t.paused=!1,0===e.buffered.length&&e.load(),t.driver.play(),t.updater.start(),t.hasAudio||(a(e,"play"),t.video.readyState>=t.video.HAVE_ENOUGH_DATA&&a(e,"playing")))))}function h(e){var t=this,n=t[g];n.driver.pause(),n.updater.stop(),t.webkitDisplayingFullscreen&&t[k](),n.paused&&!e||(n.paused=!0,n.hasAudio||a(t,"pause"),t.ended&&!t.webkitDisplayingFullscreen&&(t[y]=!0,a(t,"ended")))}function f(e,n){var i={};e[g]=i,i.paused=!0,i.hasAudio=n,i.video=e,i.updater=t(l.bind(i)),n?i.driver=s(e):(e.addEventListener("canplay",function(){e.paused||a(e,"playing")}),i.driver={src:e.src||e.currentSrc||"data:",muted:!0,paused:!0,pause:function(){i.driver.paused=!0},play:function(){i.driver.paused=!1,u(i)&&c(e,0)},get ended(){return u(i)}}),e.addEventListener("emptied",function(){var t=!i.driver.src||"data:"===i.driver.src;i.driver.src&&i.driver.src!==e.src&&(c(e,0,!0),i.driver.src=e.src,t||!n&&e.autoplay?i.driver.play():i.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?n&&0===i.driver.buffered.length&&i.driver.load():(e.pause(),e[w]())}),n&&(e.addEventListener("webkitendfullscreen",function(){i.driver.currentTime=e.currentTime}),e.addEventListener("seeking",function(){$.indexOf(100*e.currentTime|0)<0&&(i.driver.currentTime=e.currentTime)}))}function p(e){var t=e[y];return delete e[y],!e.webkitDisplayingFullscreen&&!t}function v(e){var t=e[g];e[w]=e.play,e[k]=e.pause,e.play=d,e.pause=h,o(e,"paused",t.driver),o(e,"muted",t.driver,!0),o(e,"playbackRate",t.driver,!0),o(e,"ended",t.driver),o(e,"loop",t.driver,!0),i(e,"seeking",function(e){return!e.webkitDisplayingFullscreen}),i(e,"seeked",function(e){return!e.webkitDisplayingFullscreen}),i(e,"timeupdate",p),i(e,"ended",p)}function m(e,t){if(void 0===t&&(t={}),!e[g]){if(!t.everywhere){if(!b)return;if(!(t.iPad||t.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent))return}e.pause();var n=e.autoplay;e.autoplay=!1,f(e,!e.muted),v(e),e.classList.add("IIV"),e.muted&&n&&(e.play(),e.addEventListener("playing",function t(){e.autoplay=!0,e.removeEventListener("playing",t)})),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments")}}var b="object"===("undefined"==typeof document?"undefined":n(document))&&"object-fit"in document.head.style&&!matchMedia("(-webkit-video-playable-inline)").matches,g="bfred-it:iphone-inline-video",y="bfred-it:iphone-inline-video:event",w="bfred-it:iphone-inline-video:nativeplay",k="bfred-it:iphone-inline-video:nativepause",$=[],D=0,x=void 0;return m}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){return n(this,e),this.$el=null,this.config=$.extend({},e.defaultOptions,t),this.value=this.config.defaultValue,this.$el||this.render(),this.$textarea=this.$el.find("textarea"),this.$options=this.$el.find(".option-check"),this.bindEvents(),this}return i(e,[{key:"bindEvents",value:function(){var e=this;this.$el.on("click","[data-action=send]",function(t){t.stopPropagation(),e.submitHandler()}).on("change","textarea",function(t){t.stopPropagation(),$.proxy(e.config.change,e,t.currentTarget.value)}).on("click","[data-action=close]",function(t){t.stopPropagation(),e.closeHandler()})}},{key:"show",value:function(){this.$el.animate({bottom:0},300,"linear")}},{key:"close",value:function(){var e=this;this.$el.animate({bottom:"-100%"},300,"linear",function(){e.destory()})}},{key:"destory",value:function(){this.$el.remove()}},{key:"closeHandler",value:function(){var e=this.config.onClose,t=this.getValue(),n=t.txt,i=t.checkedVals,o=$.proxy(e,this)(n,{checkedVals:i});o&&this.close()}},{key:"getValue",value:function(){var e=this.$textarea.val(),t=[];return this.$options.filter(":checked").each(function(e,n){return t.push(n.value)}),{txt:e,checkedVals:t}}},{key:"submitHandler",value:function(){var e=this.config.onSubmit,t=this.getValue(),n=t.txt,i=t.checkedVals;$.proxy(e,this)(n,{checkedVals:i})}},{key:"render",value:function(){var e=this.config,t='\n            <div class="bay-render-editor">\n                <header>\n                    <a class="close-btn" data-action="close">\n                        <i class="ib ib-times"></i>\n                    </a>\n                    <a class="send-btn" data-action="send">发送</a>\n                </header>\n                <textarea placeholder="'+e.placeholder+'">'+this.value+'</textarea>\n                <div class="select-options">\n                    '+e.checkboxData.items.map(function(e){return'<div class="option">\n                                <label><input class="option-check" type="checkbox" '+(e.checked?"checked":"")+' value="'+e.value+'"/>'+e.title+"</label>\n                            </div>"}).join("")+"\n                </div>\n            </div>";$(t).appendTo("body"),this.$el=$(".bay-render-editor")}}]),e}();o.defaultOptions={defaultValue:"",placeholder:"写点什么....",onClose:function(){return!0},onSubmit:$.noop,onChange:$.noop,checkboxData:{items:[]},submitText:"发送"};var r=void 0,a=function(e){return r&&r.destory(),r=new o(e),r.show(),r};t.default=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),a=function(){function e(t){i(this,e),this.options=(0,r.merge)(t,{$el:$(".tabs"),defaultIndex:0,onChangeTab:function(){}}),this.render=this.render.bind(this),this.bindEvents=this.bindEvents.bind(this),this.changeTab=this.changeTab.bind(this),this.showTab=this.showTab.bind(this),this.render(),this.bindEvents()}return o(e,[{key:"bindEvents",value:function(){var e=this.options.$el,t=e.find(".tab-title");t.on("touchstart",this.changeTab)}},{key:"changeTab",value:function(e){var t=this.options.$el,n=$(e.currentTarget),i=t.find(".tab-title").index(n);this.showTab(i)}},{key:"showTab",value:function(e){var t=this.options,n=t.$el,i=t.onChangeTab;n.find(".tab-panel").hide(),n.find(".tab-title").removeClass("active"),n.find(".tab-title:nth-child("+(e+1)+")").addClass("active"),n.find(".tab-panel:nth-child("+(e+1)+")").show(),i(e)}},{key:"render",value:function(){this.options.$el.addClass("bay-tabs"),this.showTab(this.options.defaultIndex)}}]),e}(),s=function(e){return new a(e)};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleNativeFullscreen=t.toggleCustomFullscreen=t.checkFullScreen=void 0;var i=n(11),o=function(e){var t=Math.floor(e);return t<10?"0"+t:t},r=function(e){var t=o(e/60),n=o(e%60);return t+":"+n},a=t.checkFullScreen=function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.fullscreenElement)},s=function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},c=function(e){e.find(".current-point").css("left","0%"),e.find(".current-bar").css("width","0%"),e.find(".video-controls-remaintime").html("00:00")},u=function(e,t,n,i){return function(){t.hide(),n.onerror=function(e){alert(JSON.stringify(e))},n.play(),i.onStartBtnClick()}},l=function(e){return function(){e.play()}},d=function(e){return function(){e.pause()}},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"play";"play"===t?(e.hide(),e.find(".play-btn").hide(),e.find(".pause-btn").show()):(e.show(),e.find(".pause-btn").hide(),e.find(".play-btn").show())},f=function(e){h(e,"play")},p=function(e){h(e,"pause")},v=function(e){c(e)},m=function(e,t,n){var i=t/n*100;e.find(".current-point").css("left",i+"%"),e.find(".current-bar").css("width",i+"%"),e.find(".current-time").html(r(t)),e.find(".fulltime").html(r(n))},b=function(e){var t=e.captions,n=void 0===t?[]:t,i=n.length,o=['<div class="caption-btn"><i class="ib ib-eye-o"/></div>'].join(""),r=['<div class="video-controls '+(i?"has-captions":"")+'" style="display: none;">','   <div class="player-btn">','       <i class="ib ib-play play-btn"></i>','       <i class="ib ib-pause pause-btn" style="display: none;"></i>',"   </div>",'   <div class="current-time">00:00</div>','   <div class="bar">','       <div class="current-point"></div>','       <div class="current-bar"></div>',"   </div>",'   <div class="fulltime">00:00</div>',i?o:"",'   <div class="fullscreen-btn"><i class="ib ib-expand"/></div>',"</div>"].join("");return $($.parseHTML(r))},g=function(){var e=['<div class="caption">',"</div>"].join("");return $(e)},y=function(e,t,n){var i=n.find(function(e){return t>=e.startTime&&t<=e.endTime});e.html(i?"<p>"+i.text+"</p><p>"+i.transText+"</p>":"")},w=function(e){var t=['<div class="video-cover" style="background-image: url('+e+')">','   <div class="start-btn"><i class="ib ib-play-circle-o"></i></div>',"</div>"].join("");return $(t)},k=t.toggleCustomFullscreen=function(e,t){var n="bay-video-fullscreen-wrap",i=e.find("video")[0],o=i.paused||i.ended;e.parent().hasClass(n)?e.unwrap(""):e.wrap('<div class="'+n+'"></div>'),o||i.play()},D=t.toggleNativeFullscreen=function(e){return a()?void(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()):void(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.webkitEnterFullscreen&&e.webkitEnterFullscreen())},x=function(e,t,n,i,o,r){var c=e[0],h=!1,b=c.clientHeight,g=function(){var e=window.outerHeight,t=(e-b)/2;a()?(i.addClass("fullscreen"),i.css("transform","translate(0, -"+t+"px)"),s(i[0])):(i.css("transform","translate(0, 0)"),i.removeClass("fullscreen"))};n&&n.on("click",u(t,n,c,r)),t.on("click",".play-btn",l(c)).on("click",".pause-btn",d(c)).on("click",".caption-btn",function(){t.hide(),i.toggle()}).on("click",".fullscreen-btn",function(){r.isFullscreenCustomed?k(o,r):D(c)}),e.on("timeupdate",function(e){var n=e.target,o=n.currentTime,a=n.duration;m(t,o,a),y(i,o,r.captions),r.onTimeUpdate(o,a,n)}).on("play",function(){h||(b=c.clientHeight,i.show(),h=!0),f(t),r.onPlay()}).on("pause",function(){p(t),r.onPause()}).on("ended",function(){v(t),r.onEnd()}).on("click",function(){return t.toggle()}).on("x5videoenterfullscreen",function(){r.onFullscreennChange("enter","native")}).on("x5videoexitfullscreen",function(){r.onFullscreennChange("exit","native")}).on("webkitfullscreenchange",function(){r.onFullscreennChange(a()?"enter":"exit","native"),g()}).on("mozfullscreenchange",function(){r.onFullscreennChange(a()?"enter":"exit","native"),g()}).on("MSFullscreenChange",function(){r.onFullscreennChange(a()?"enter":"exit","native"),g()}).on("fullscreenchange",function(){r.onFullscreennChange(a()?"enter":"exit","native"),g()})},C=function(e,t){(0,i.enableInlineVideo)(e[0]),e.wrap("<div class='bay-video-box'></div>");var n=e.parent(),o=b(t);n.append(o);var r=g();r.hide(),n.append(r);var a=w(t.poster);n.append(a),x(e,o,a,r,n,t)},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={isFullscreenCustomed:!1,onFullscreennChange:function(){},onTimeUpdate:function(){},onStartBtnClick:function(){},onPlay:function(){},onPause:function(){},onEnd:function(){},captions:[],poster:null};$(e).addClass("bay-video").attr("webkit-playsinline",!0).attr("playsinline",!0).attr("x5-video-orientation","portrait").attr("x5-video-player-type","h5"),$(e).each(function(e,i){C($(i),$.extend(n,t))})};t.default=T},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countDownBtn=t.lazyloadImage=t.copyToClipboard=t.selectElement=t.clearFormData=t.getFormData=t.removeClass=t.addClass=t.hasClass=void 0;var i=n(2),o=t.hasClass=function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},r=t.addClass=function(e,t){e.classList?e.classList.add(t):o(e,t)||(e.className+=" "+t)},a=t.removeClass=function(e,t){if(e.classList)e.classList.remove(t);else if(o(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}},s=(t.getFormData=function(e){var t={},n=e.querySelectorAll("input, textarea"),i=Array.prototype.slice.call(n);return i.forEach(function(e){var n=e.getAttribute("name"),i=e.getAttribute("type"),o=e.value;return!n||"radio"===i&&!e.checked?null:("radio"===i&&(o="true"===o||o,o="false"!==o&&o),"checkbox"===i&&(o=e.checked),"number"===i&&(o=~~o),t[n]=o,null)}),t},t.clearFormData=function(e){var t=e.querySelectorAll("input, textarea"),n=Array.prototype.slice.call(t);n.forEach(function(e){e.value=null})},t.selectElement=function(e){if(document.selection){var t=document.body.createTextRange();t.moveToElementText(e),t.select()}else if(window.getSelection){var n=document.createRange();n.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(n)}}),c=(t.copyToClipboard=function(e){var t=document.createElement("div");t.textContent=e,document.body.appendChild(t),s(t),document.execCommand("copy"),t.remove()},t.lazyloadImage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=window.requestAnimationFrame||window.webkitRequestAnimationFrame,n=document.querySelectorAll("img[data-src]"),i=function(e){if(!e.getAttribute("loaded")){var t=e.getAttribute("data-src");e.setAttribute("src",t),e.setAttribute("loaded",!0)}},o=function(){var o=Array.prototype.slice.call(n);o.forEach(function(n){t(function(){var t=n.getBoundingClientRect().top,o=window.innerHeight;t-e<o&&i(n)})})};window.addEventListener("scroll",o,!1),window.addEventListener("load",o,!1)},function(e,t){t?(a(e,"disable"),e.setAttribute("disabled",!1)):(r(e,"disable"),e.setAttribute("disabled",!0))});t.countDownBtn=function(e,t){var n={time:60,getProcessText:function(e){return e+"s后重发"},endText:"重新获取验证码"};t=(0,i.merge)(t,n),e.innerText=t.getProcessText(t.time),c(e,!1);var o=t.time,r=window.setInterval(function(){o>0?(o-=1,e.innerText=t.getProcessText(o)):(window.clearInterval(r),e.innerText=t.endText,c(e,!0))},1e3);return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformUrlToAnchor=t.uniqArr=t.getUrlsFromStr=t.getFrontendVersion=t.getDayDiff=t.ajax=t.getCookie=t.getSearchValue=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(3),r=n(2),a=(t.getSearchValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href,n=e.replace(/[[\]]/g,"\\$&"),i=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)"),o=i.exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g,"")):"":null},t.getCookie=function(e,t){var n="; "+t+"=(\\w+)",i=new RegExp(n,"g"),o=i.exec("; "+e);return o&&o[1]}),s=(t.ajax=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2];$.support.cors=!0;var o=$.extend({},{LOGIN_URL:"/web/account/login"},n),r={contentType:"application/json",crossDomain:!0,xhrFields:{withCredentials:!0},headers:{"X-CSRFToken":a(document.cookie,"csrftoken")}},s={success:function(t){401===t.status_code||403===t.status_code?window.location.href=o.LOGIN_URL+"/?next="+location.pathname+location.search:0===t.status_code?e.success&&e.success(t.data):e.error&&e.error(t.status_code,t.msg||"请求失败，请稍后重试")},error:function(t,n){e.error&&e.error(t.status,n+"("+t.status+")")}};e.type=e.type||"GET",e.data&&"object"===i(e.data)&&"GET"!==e.type&&(e.data=JSON.stringify(e.data)),t?$.ajax($.extend({},r,e)):$.ajax($.extend({},r,e,s))},t.getDayDiff=function(e,t){var n=new Date((0,o.formatDate)(e)),i=new Date((0,o.formatDate)(t));return Math.floor((new Date(i)-new Date(n))/864e5)},t.getFrontendVersion=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent,t=e.match(/Frontend\/(\d+).(\d+)/gi);return t&&t.length?parseFloat(t[0].replace(/Frontend\//gi,"")):null},t.getUrlsFromStr=function(e){var t=new RegExp("https?:\\/\\/[-A-Za-z0-9+&@#\\/%?=~_|!:,.;]+[-A-Za-z0-9+&@#\\/%=~_|]","ig");return e.match(t)}),c=t.uniqArr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return(0,r.isArray)(e)?(e.forEach(function(n,i){var o=e.indexOf(n);o===i&&e[o]===n&&t.push(n)}),t):t};t.transformUrlToAnchor=function(e){var t=e,n=c(s(e));return n.forEach(function(e){var n="<a href='"+e+"' target='_blank'>"+e+"</a>";t=t.replace(new RegExp(""+e,"gi"),n)}),t}},function(e,t){}]);